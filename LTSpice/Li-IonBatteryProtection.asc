Version 4
SHEET 1 1672 680
WIRE 16 -592 -160 -592
WIRE 96 -592 16 -592
WIRE 208 -592 96 -592
WIRE 352 -592 208 -592
WIRE 544 -592 352 -592
WIRE 16 -560 16 -592
WIRE 96 -560 96 -592
WIRE 352 -560 352 -592
WIRE 544 -560 544 -592
WIRE 96 -448 96 -480
WIRE 240 -448 96 -448
WIRE 352 -448 352 -480
WIRE 352 -448 320 -448
WIRE 400 -448 352 -448
WIRE 544 -432 544 -480
WIRE 576 -432 544 -432
WIRE 832 -432 768 -432
WIRE 896 -432 832 -432
WIRE 1040 -432 976 -432
WIRE 1168 -432 1040 -432
WIRE 1168 -400 1168 -432
WIRE 208 -384 208 -592
WIRE 16 -368 16 -480
WIRE 48 -368 16 -368
WIRE 176 -368 48 -368
WIRE 352 -352 352 -448
WIRE 352 -352 240 -352
WIRE -160 -336 -160 -592
WIRE -160 -336 -208 -336
WIRE 96 -336 96 -448
WIRE 128 -336 96 -336
WIRE 176 -336 128 -336
WIRE 544 -336 480 -336
WIRE 576 -336 544 -336
WIRE 800 -336 768 -336
WIRE 352 -320 352 -352
WIRE 208 -304 208 -320
WIRE 240 -304 240 -336
WIRE 240 -304 208 -304
WIRE 1168 -288 1168 -320
WIRE -160 -272 -160 -336
WIRE 16 -272 16 -368
WIRE 96 -272 96 -336
WIRE 544 -256 544 -336
WIRE 352 -208 352 -240
WIRE 480 -208 352 -208
WIRE 1040 -144 1040 -432
WIRE 1088 -144 1040 -144
WIRE 1168 -144 1088 -144
WIRE 1280 -144 1168 -144
WIRE -160 -128 -160 -192
WIRE 16 -128 16 -208
WIRE 16 -128 -160 -128
WIRE 96 -128 96 -192
WIRE 96 -128 16 -128
WIRE 208 -128 208 -304
WIRE 208 -128 96 -128
WIRE 544 -128 544 -160
WIRE 544 -128 208 -128
WIRE -160 -48 -160 -128
WIRE 16 -48 -160 -48
WIRE 96 -48 16 -48
WIRE 208 -48 96 -48
WIRE 352 -48 208 -48
WIRE 544 -48 352 -48
WIRE 16 -16 16 -48
WIRE 96 -16 96 -48
WIRE 352 -16 352 -48
WIRE 544 -16 544 -48
WIRE 1040 -16 1040 -144
WIRE 1168 -16 1168 -144
WIRE 1088 0 1088 -144
WIRE 96 96 96 64
WIRE 240 96 96 96
WIRE 352 96 352 64
WIRE 352 96 320 96
WIRE 400 96 352 96
WIRE 544 112 544 64
WIRE 576 112 544 112
WIRE 832 112 832 -432
WIRE 832 112 768 112
WIRE 896 112 832 112
WIRE 1168 112 1168 64
WIRE 1248 112 1168 112
WIRE 1280 112 1248 112
WIRE 1168 144 1168 112
WIRE 208 160 208 -48
WIRE 1040 160 1040 64
WIRE 1040 160 976 160
WIRE 16 176 16 64
WIRE 48 176 16 176
WIRE 176 176 48 176
WIRE 352 192 352 96
WIRE 352 192 240 192
WIRE -160 208 -160 -48
WIRE -160 208 -208 208
WIRE 96 208 96 96
WIRE 128 208 96 208
WIRE 176 208 128 208
WIRE 544 208 480 208
WIRE 576 208 544 208
WIRE 800 208 800 -336
WIRE 800 208 768 208
WIRE 352 224 352 192
WIRE 1040 224 1040 160
WIRE 1088 224 1088 64
WIRE 1088 224 1040 224
WIRE 1248 224 1248 112
WIRE 208 240 208 224
WIRE 240 240 240 208
WIRE 240 240 208 240
WIRE -160 272 -160 208
WIRE 16 272 16 176
WIRE 96 272 96 208
WIRE 1040 272 1040 224
WIRE 544 288 544 208
WIRE 832 320 832 112
WIRE 864 320 832 320
WIRE 960 320 960 256
WIRE 960 320 944 320
WIRE 976 320 960 320
WIRE 352 336 352 304
WIRE 480 336 352 336
WIRE 832 336 832 320
WIRE 960 336 960 320
WIRE -160 416 -160 352
WIRE 16 416 16 336
WIRE 16 416 -160 416
WIRE 96 416 96 352
WIRE 96 416 16 416
WIRE 208 416 208 240
WIRE 208 416 96 416
WIRE 544 416 544 384
WIRE 544 416 208 416
WIRE 800 416 800 208
WIRE 800 416 544 416
WIRE 832 416 832 400
WIRE 832 416 800 416
WIRE 960 416 960 400
WIRE 1040 416 1040 368
WIRE 1040 416 960 416
WIRE 1168 416 1168 256
WIRE 1168 416 1040 416
WIRE 1248 416 1248 288
WIRE 1248 416 1168 416
WIRE 208 448 208 416
WIRE 1168 448 1168 416
FLAG 1168 448 0
FLAG -208 208 Sawtooth-1
FLAG 1280 112 Output-V
IOPIN 1280 112 Out
FLAG 1280 -144 Output+V
IOPIN 1280 -144 Out
FLAG 48 176 -Comp-1
FLAG 128 208 +Comp-1
FLAG 896 112 Bias-2
FLAG 1168 -288 0
FLAG 480 208 TP-Q1
FLAG 208 448 0
FLAG 400 96 Out-U1
FLAG -208 -336 Sawtooth-2
FLAG 400 -448 Out-U2
FLAG 48 -368 -Comp-2
FLAG 128 -336 +Comp-2
FLAG 480 -336 TP-Q2
FLAG 960 256 Bias-3
FLAG 976 160 Bias-4
SYMBOL res 0 -32 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 80 -32 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 80 256 R0
SYMATTR InstName R3
SYMATTR Value 620k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 336 -32 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL zener 32 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Z1
SYMATTR Value 1N4728
SYMBOL voltage -160 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(3.6 0 0 1 0 0 1 1)
SYMBOL res 1152 -32 R0
SYMATTR InstName RLoad
SYMATTR Value 2
SYMBOL IRF540 1104 208 R0
WINDOW 0 42 -56 Left 2
WINDOW 3 72 31 Left 2
SYMATTR InstName Q4
SYMATTR Value irf540n
SYMBOL res 336 80 R90
WINDOW 0 1 63 VBottom 2
WINDOW 3 34 46 VTop 2
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL res 368 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL cap 1232 224 R0
SYMATTR InstName C4
SYMATTR Value 47µf
SYMBOL voltage 1168 -416 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(14.4 0 0 1 0 0 1 1)
SYMBOL res 1056 80 R180
WINDOW 0 28 83 Left 2
WINDOW 3 31 45 Left 2
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL Optos\\PC817C 672 160 R0
SYMATTR InstName U2
SYMBOL npn2 480 288 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 528 -32 R0
SYMATTR InstName R7
SYMATTR Value 120
SYMBOL res 336 -464 R90
WINDOW 0 -1 64 VBottom 2
WINDOW 3 33 47 VTop 2
SYMATTR InstName R15
SYMATTR Value 47k
SYMBOL res 0 -576 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 80 -576 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 80 -288 R0
SYMATTR InstName R13
SYMATTR Value 620k
SYMBOL res 336 -576 R0
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL zener 32 -208 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Z2
SYMATTR Value 1N4728
SYMBOL voltage -160 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(3.6 0 0 1 0 0 1 2)
SYMBOL res 368 -224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 100
SYMBOL npn2 480 -256 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 528 -576 R0
SYMATTR InstName R17
SYMATTR Value 120
SYMBOL Optos\\PC817C 672 -384 R0
SYMATTR InstName U4
SYMBOL LM311 208 128 R0
SYMATTR InstName U1
SYMBOL LM311 208 -416 R0
SYMATTR InstName U3
SYMBOL npn2 976 272 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 992 -448 R90
WINDOW 0 -3 63 VBottom 2
WINDOW 3 31 47 VTop 2
SYMATTR InstName R10
SYMATTR Value 20k
SYMBOL res 960 304 R90
WINDOW 0 1 64 VBottom 2
WINDOW 3 33 46 VTop 2
SYMATTR InstName R8
SYMATTR Value 5.1k
SYMBOL cap 816 336 R0
SYMATTR InstName C1
SYMATTR Value 0.1µf
SYMBOL cap 944 336 R0
SYMATTR InstName C2
SYMATTR Value 0.22µf
SYMBOL cap 1072 0 R0
SYMATTR InstName C3
SYMATTR Value 0.001µf
TEXT 1128 -528 Left 2 !.inc irf540n.sub
TEXT 1128 -480 Left 2 !.tran 2000m
TEXT 1128 -512 Left 2 !.inc PC817.sub
TEXT 1128 -496 Left 2 !.inc LM311.sub
TEXT 864 -368 Left 2 ;R10 -- 14.4V = 20k, 7.2V = 6.2k
TEXT 864 16 Left 2 ;R9 -- 14.4V = 3.3k, 7.2V = 1.8K
TEXT 784 -456 Left 2 ;16.6 mA through both optos
TEXT 744 -584 Left 4 ;Li-Ion Battery Protector
TEXT 744 -568 Left 2 ;Carl J. Nobile
TEXT 744 -552 Left 2 ;2017-07-23
