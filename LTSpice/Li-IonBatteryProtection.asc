Version 4
SHEET 1 1672 680
WIRE 16 -512 -160 -512
WIRE 96 -512 16 -512
WIRE 208 -512 96 -512
WIRE 352 -512 208 -512
WIRE 544 -512 352 -512
WIRE 16 -480 16 -512
WIRE 96 -480 96 -512
WIRE 352 -480 352 -512
WIRE 544 -480 544 -512
WIRE 96 -368 96 -400
WIRE 240 -368 96 -368
WIRE 352 -368 352 -400
WIRE 352 -368 320 -368
WIRE 400 -368 352 -368
WIRE 544 -352 544 -400
WIRE 576 -352 544 -352
WIRE 832 -352 768 -352
WIRE 896 -352 832 -352
WIRE 1040 -352 976 -352
WIRE 1168 -352 1040 -352
WIRE 1168 -320 1168 -352
WIRE 208 -304 208 -512
WIRE 16 -288 16 -400
WIRE 48 -288 16 -288
WIRE 176 -288 48 -288
WIRE 352 -272 352 -368
WIRE 352 -272 240 -272
WIRE -160 -256 -160 -512
WIRE -160 -256 -208 -256
WIRE 96 -256 96 -368
WIRE 128 -256 96 -256
WIRE 176 -256 128 -256
WIRE 544 -256 480 -256
WIRE 576 -256 544 -256
WIRE 800 -256 768 -256
WIRE 352 -240 352 -272
WIRE 208 -224 208 -240
WIRE 240 -224 240 -256
WIRE 240 -224 208 -224
WIRE 1168 -208 1168 -240
WIRE -160 -192 -160 -256
WIRE 16 -192 16 -288
WIRE 96 -192 96 -256
WIRE 544 -176 544 -256
WIRE 352 -128 352 -160
WIRE 480 -128 352 -128
WIRE 1040 -64 1040 -352
WIRE 1088 -64 1040 -64
WIRE 1168 -64 1088 -64
WIRE 1280 -64 1168 -64
WIRE -160 -48 -160 -112
WIRE 16 -48 16 -128
WIRE 16 -48 -160 -48
WIRE 96 -48 96 -112
WIRE 96 -48 16 -48
WIRE 208 -48 208 -224
WIRE 208 -48 96 -48
WIRE 352 -48 208 -48
WIRE 544 -48 544 -80
WIRE 544 -48 352 -48
WIRE 16 -16 16 -48
WIRE 96 -16 96 -48
WIRE 352 -16 352 -48
WIRE 544 -16 544 -48
WIRE 1040 -16 1040 -64
WIRE 1168 -16 1168 -64
WIRE 1088 0 1088 -64
WIRE 96 96 96 64
WIRE 240 96 96 96
WIRE 352 96 352 64
WIRE 352 96 320 96
WIRE 400 96 352 96
WIRE 544 112 544 64
WIRE 576 112 544 112
WIRE 832 112 832 -352
WIRE 832 112 768 112
WIRE 896 112 832 112
WIRE 1168 112 1168 64
WIRE 1248 112 1168 112
WIRE 1280 112 1248 112
WIRE 1168 144 1168 112
WIRE 208 160 208 -48
WIRE 1040 160 1040 64
WIRE 1040 160 976 160
WIRE 16 176 16 64
WIRE 48 176 16 176
WIRE 176 176 48 176
WIRE 352 192 352 96
WIRE 352 192 240 192
WIRE -160 208 -160 -48
WIRE -160 208 -208 208
WIRE 96 208 96 96
WIRE 128 208 96 208
WIRE 176 208 128 208
WIRE 544 208 480 208
WIRE 576 208 544 208
WIRE 800 208 800 -256
WIRE 800 208 768 208
WIRE 352 224 352 192
WIRE 1040 224 1040 160
WIRE 1088 224 1088 64
WIRE 1088 224 1040 224
WIRE 1248 224 1248 112
WIRE 208 240 208 224
WIRE 240 240 240 208
WIRE 240 240 208 240
WIRE -160 272 -160 208
WIRE 16 272 16 176
WIRE 96 272 96 208
WIRE 1040 272 1040 224
WIRE 544 288 544 208
WIRE 832 320 832 112
WIRE 864 320 832 320
WIRE 960 320 960 256
WIRE 960 320 944 320
WIRE 976 320 960 320
WIRE 352 336 352 304
WIRE 480 336 352 336
WIRE 832 336 832 320
WIRE 960 336 960 320
WIRE -160 416 -160 352
WIRE 16 416 16 336
WIRE 16 416 -160 416
WIRE 96 416 96 352
WIRE 96 416 16 416
WIRE 208 416 208 240
WIRE 208 416 96 416
WIRE 544 416 544 384
WIRE 544 416 208 416
WIRE 800 416 800 208
WIRE 800 416 544 416
WIRE 832 416 832 400
WIRE 832 416 800 416
WIRE 960 416 960 400
WIRE 1040 416 1040 368
WIRE 1040 416 960 416
WIRE 1168 416 1168 256
WIRE 1168 416 1040 416
WIRE 1248 416 1248 288
WIRE 1248 416 1168 416
WIRE 208 448 208 416
WIRE 1168 448 1168 416
FLAG 1168 448 0
FLAG -208 208 Sawtooth-1
FLAG 1280 112 Output-V
IOPIN 1280 112 Out
FLAG 1280 -64 Output+V
IOPIN 1280 -64 Out
FLAG 48 176 -Comp-1
FLAG 128 208 +Comp-1
FLAG 896 112 Bias-2
FLAG 1168 -208 0
FLAG 480 208 TP-Q1
FLAG 208 448 0
FLAG 400 96 Out-U1
FLAG -208 -256 Sawtooth-2
FLAG 400 -368 Out-U2
FLAG 48 -288 -Comp-2
FLAG 128 -256 +Comp-2
FLAG 480 -256 TP-Q2
FLAG 960 256 Bias-3
FLAG 976 160 Bias-4
SYMBOL res 0 -32 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res 80 -32 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 80 256 R0
SYMATTR InstName R3
SYMATTR Value 620k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL res 336 -32 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMATTR SpiceLine tol=1 pwr=0.1
SYMBOL zener 32 336 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Z1
SYMATTR Value 1N4728
SYMBOL voltage -160 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value PULSE(3.6 0 0 1 0 0 1 1)
SYMBOL res 1152 -32 R0
SYMATTR InstName RLoad
SYMATTR Value 2
SYMBOL IRF540 1104 208 R0
WINDOW 0 42 -56 Left 2
WINDOW 3 72 31 Left 2
SYMATTR InstName Q4
SYMATTR Value irf540n
SYMBOL res 336 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 47k
SYMBOL res 368 320 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL cap 1232 224 R0
SYMATTR InstName C4
SYMATTR Value 47µf
SYMBOL voltage 1168 -336 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(14.4 0 0 1 0 0 1 1)
SYMBOL res 1056 80 R180
WINDOW 0 28 83 Left 2
WINDOW 3 31 45 Left 2
SYMATTR InstName R9
SYMATTR Value 3.3k
SYMBOL Optos\\PC817C 672 160 R0
SYMATTR InstName U2
SYMBOL npn2 480 288 R0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL res 528 -32 R0
SYMATTR InstName R7
SYMATTR Value 120
SYMBOL res 336 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 47k
SYMBOL res 0 -496 R0
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 80 -496 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 80 -208 R0
SYMATTR InstName R13
SYMATTR Value 620k
SYMBOL res 336 -496 R0
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL zener 32 -128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName Z2
SYMATTR Value 1N4728
SYMBOL voltage -160 -208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(3.6 0 0 1 0 0 1 2)
SYMBOL res 368 -144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 100
SYMBOL npn2 480 -176 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 528 -496 R0
SYMATTR InstName R17
SYMATTR Value 120
SYMBOL Optos\\PC817C 672 -304 R0
SYMATTR InstName U4
SYMBOL LM311 208 128 R0
SYMATTR InstName U1
SYMBOL LM311 208 -336 R0
SYMATTR InstName U3
SYMBOL npn2 976 272 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 992 -368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 20k
SYMBOL res 960 304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5.1k
SYMBOL cap 816 336 R0
SYMATTR InstName C1
SYMATTR Value 0.1µf
SYMBOL cap 944 336 R0
SYMATTR InstName C2
SYMATTR Value 0.22µf
SYMBOL cap 1072 0 R0
SYMATTR InstName C3
SYMATTR Value 0.001µf
TEXT 1128 -448 Left 2 !.inc irf540n.sub
TEXT 1128 -400 Left 2 !.tran 2000m
TEXT 1128 -432 Left 2 !.inc PC817.sub
TEXT 1128 -416 Left 2 !.inc LM311.sub
TEXT 864 -288 Left 2 ;R10 -- 14.4V = 20k, 7.2V = 6.2k
TEXT 864 16 Left 2 ;R9 -- 14.4V = 3.3k, 7.2V = 1.8K
TEXT 784 -376 Left 2 ;16.6 mA through both optos
TEXT 744 -504 Left 4 ;Li-Ion Battery Protector
TEXT 744 -488 Left 2 ;Carl J. Nobile
TEXT 744 -472 Left 2 ;2017-07-23
